<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å°å‹‡è€…å–®å ´æˆ°é¬¥ - ç†Šç†Šæç¤ºç‰ˆ</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", sans-serif;
      background: #fff7e6;
      margin: 0;
      padding: 16px;
      display: flex;
      justify-content: center;
    }
    .game-container {
      max-width: 600px;
      width: 100%;
      background: #fffdf7;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 16px;
      border: 3px solid #f3c58a;
    }
    h1 {
      text-align: center;
      margin: 0;
      color: #d27b2f;
      font-size: 22px;
    }
    .sub {
      text-align: center;
      color: #666;
      font-size: 13px;
      margin-bottom: 12px;
    }
    #bearHint {
      background:#fff3c8;
      border:2px solid #e8b04c;
      padding:8px;
      border-radius:8px;
      margin-bottom:10px;
      font-size:14px;
      display:none;
    }
    .row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }
    .card {
      flex: 1 1 48%;
      background: #fffaf0;
      border-radius: 12px;
      padding: 10px;
      border: 2px solid #f0d2a4;
    }
    .card h2 {
      margin: 0 0 4px;
      font-size: 16px;
    }
    .label {
      font-size: 11px;
      color: #999;
      margin-bottom: 2px;
    }
    .hp, .mood {
      font-size: 18px;
      margin-bottom: 4px;
    }
    .avatar {
      font-size: 32px;
      text-align: center;
      margin-bottom: 4px;
    }
    select, button {
      font-size: 13px;
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid #d0b48a;
      background: #fff8e8;
    }
    button { cursor: pointer; font-weight: 600; }
    button:disabled { opacity: 0.5; cursor:not-allowed; }
    .choice-buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
    }
    .choice-btn {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: 3px solid #f3c58a;
      font-size: 24px;
      background: #ffeec4;
      display: flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap: 2px;
    }
    .choice-btn span { font-size: 11px; }
    .log {
      background: #fffaf0;
      border-radius: 8px;
      border: 1px dashed #f0cda0;
      padding: 8px;
      font-size: 12px;
      height: 120px;
      overflow-y: auto;
      white-space: pre-line;
    }
    .ribbon {
      text-align: center;
      margin-top: 6px;
      font-size: 13px;
      color: #a56a23;
    }
  </style>
</head>
<body>

  <div class="game-container">
    <h1>ğŸŒŸ å°å‹‡è€…å–®å ´æˆ°é¬¥</h1>
    <div class="sub">å‰ªåˆ€ âœŒï¸ãƒ»çŸ³é ­ âœŠãƒ»å¸ƒ ğŸ–</div>

    <!-- ğŸ» æ‘é•·ç†Šç†Šæç¤º -->
    <div id="bearHint"></div>

    <!-- å‹‡è€…é¸æ“‡ -->
    <div style="text-align:center; margin-bottom:12px;">
      <label>é¸æ“‡å‹‡è€…ï¼š</label>
      <select id="heroSelect">
        <option value="æˆ°å£«">æˆ°å£«ï¼ˆâœŠ çŸ³é ­å¤©è³¦ï¼‰</option>
        <option value="æ³•å¸«">æ³•å¸«ï¼ˆâœŒï¸ å‰ªåˆ€å¤©è³¦ï¼‰</option>
        <option value="ç‰§å¸«">ç‰§å¸«ï¼ˆğŸ– å¸ƒå¤©è³¦ï¼‰</option>
        <option value="å‹‡æ•¢çš„æ‘æ°‘">å‹‡æ•¢çš„æ‘æ°‘ï¼ˆç„¡é™åˆ¶ï¼‰</option>
      </select>
      <button id="startBtn">é–‹å§‹æˆ°é¬¥</button>
    </div>

    <div class="row">
      <div class="card">
        <h2 id="heroName">å‹‡è€…</h2>
        <div class="avatar">ğŸ§’</div>
        <div class="label">å¥½å¿ƒæƒ…ï¼ˆHPï¼‰</div>
        <div class="hp" id="heroHp">â¤ï¸â¤ï¸â¤ï¸</div>
        <div class="label">ä¸Šä¸€å›åˆ</div>
        <div id="heroLast">â€”</div>
      </div>

      <div class="card">
        <h2>è¢«å£æƒ…ç·’å½±éŸ¿çš„é­”ç‰©</h2>
        <div class="avatar">ğŸ‘¾</div>
        <div class="label">å£æƒ…ç·’</div>
        <div class="mood" id="monsterMood">ğŸ’¢ğŸ’¢ğŸ’¢</div>
        <div class="label">ä¸Šä¸€å›åˆ</div>
        <div id="monsterLast">â€”</div>
      </div>
    </div>

    <!-- å‡ºæ‹³æŒ‰éˆ• -->
    <div class="choice-buttons">
      <button class="choice-btn" data-move="rock" disabled>âœŠ<span>çŸ³é ­</span></button>
      <button class="choice-btn" data-move="scissors" disabled>âœŒï¸<span>å‰ªåˆ€</span></button>
      <button class="choice-btn" data-move="paper" disabled>ğŸ–<span>å¸ƒ</span></button>
    </div>

    <div class="log" id="log"></div>
    <div class="ribbon" id="resultText"></div>
    <div style="text-align:center; margin-top:8px;">
      <button id="resetBtn" style="display:none;">å†ç©ä¸€æ¬¡</button>
    </div>

  </div>

  <script>
    // ========= å¯èª¿æ•´åŸºæœ¬æ•¸å€¼ =========
    let MAX_HERO_HP = 3;
    let MAX_MONSTER_MOOD = 3;

    // ========= é­”ç‰©å¼±é»ï¼ˆç¦å‡ºæ‹³ï¼‰ =========
    // å¯æ”¹æˆ rock / scissors / paper
    const monsterWeakness = "rock";

    // ========= ç‹€æ…‹è®Šæ•¸ =========
    let heroHp, monsterMood, gameOver = false;

    const heroSelect = document.getElementById("heroSelect");
    const heroNameEl = document.getElementById("heroName");
    const heroHpEl = document.getElementById("heroHp");
    const monsterMoodEl = document.getElementById("monsterMood");
    const heroLastEl = document.getElementById("heroLast");
    const monsterLastEl = document.getElementById("monsterLast");
    const logEl = document.getElementById("log");
    const bearHint = document.getElementById("bearHint");
    const resultTextEl = document.getElementById("resultText");
    const choiceButtons = document.querySelectorAll(".choice-btn");

    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");

    const moveDisplay = {
      rock: "âœŠï¼ˆçŸ³é ­ï¼‰",
      scissors: "âœŒï¸ï¼ˆå‰ªåˆ€ï¼‰",
      paper: "ğŸ–ï¼ˆå¸ƒï¼‰"
    };

    function hearts(n){ return "â¤ï¸".repeat(n); }
    function angry(n){ return "ğŸ’¢".repeat(n); }

    function appendLog(text){
      logEl.textContent += text + "\n";
      logEl.scrollTop = logEl.scrollHeight;
    }

    function setButtonsEnabled(enable){
      choiceButtons.forEach(btn => btn.disabled = !enable);
    }

    // ========= éŠæˆ²é–‹å§‹ =========
    function startGame(){
      heroHp = MAX_HERO_HP;
      monsterMood = MAX_MONSTER_MOOD;
      gameOver = false;

      heroLastEl.textContent = "â€”";
      monsterLastEl.textContent = "â€”";
      resultTextEl.textContent = "";
      logEl.textContent = "";

      heroNameEl.textContent = "å‹‡è€…ï¼š" + heroSelect.value;
      heroHpEl.textContent = hearts(heroHp);
      monsterMoodEl.textContent = angry(monsterMood);

      // ğŸ» ç†Šç†Šæç¤ºå¼±é»ï¼ˆé¡¯ç¤ºç¦å‡ºæ‹³ï¼‰
      bearHint.style.display = "block";
      if(monsterWeakness === "rock"){
        bearHint.textContent = "ğŸ» æ‘é•·ç†Šç†Šï¼šå°å‹‡è€…æ³¨æ„ï¼é€™éš»é­”ç‰©ä¸èƒ½å‡º âœŠ çŸ³é ­å–”ï¼";
      } else if(monsterWeakness === "scissors"){
        bearHint.textContent = "ğŸ» æ‘é•·ç†Šç†Šï¼šå˜¿å˜¿ï½é€™éš»é­”ç‰©ä¸èƒ½å‡º âœŒï¸ å‰ªåˆ€ï¼";
      } else {
        bearHint.textContent = "ğŸ» æ‘é•·ç†Šç†Šï¼šå¤ªå¥½äº†ï¼é€™éš»é­”ç‰©ä¸èƒ½å‡º ğŸ– å¸ƒï¼";
      }

      setButtonsEnabled(true);
      resetBtn.style.display = "none";

      appendLog("æ–°çš„å†’éšªé–‹å§‹äº†ï¼åŠ æ²¹ï¼Œå°å‹‡è€…ï¼");
    }

    // ========= é­”ç‰©éš¨æ©Ÿå‡ºæ‹³ï¼ˆé¿é–‹å¼±é»ï¼‰ =========
    function randomMove(){
      const moves = ["rock", "scissors", "paper"].filter(m => m !== monsterWeakness);
      return moves[Math.floor(Math.random() * moves.length)];
    }

    // ========= åˆ¤å®šå‹è²  =========
    function judge(p, e){
      if(p===e) return "draw";
      if(
        (p==="rock" && e==="scissors") ||
        (p==="scissors" && e==="paper") ||
        (p==="paper" && e==="rock")
      ) return "win";
      return "lose";
    }

    // ========= å‡ºæ‹³è™•ç† =========
    function handleChoice(move){
      if(gameOver) return;

      const enemy = randomMove();
      const result = judge(move, enemy);

      heroLastEl.textContent = moveDisplay[move];
      monsterLastEl.textContent = moveDisplay[enemy];

      if(result === "win"){
        // â­ æˆ°å£«å¤©è³¦ï¼šçŸ³é ­å‹åˆ© â†’ -2
        if(heroSelect.value === "æˆ°å£«" && move === "rock"){
          monsterMood -= 2;
          appendLog("ğŸ”¥ å¤©è³¦ç™¼å‹•ï¼æˆ°å£«çš„çŸ³é ­å¨åŠ›åŠ å€ï¼Œé­”ç‰©å£æƒ…ç·’ -2ï¼");
        } else {
          monsterMood -= 1;
          appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©å‡ºäº† ${moveDisplay[enemy]}ã€‚\nä½ æˆåŠŸå‚³éå¥½å¿ƒæƒ…ï¼Œé­”ç‰©å£æƒ…ç·’ -1ï¼`);
        }
        if(monsterMood < 0) monsterMood = 0;
        monsterMoodEl.textContent = angry(monsterMood);

      } else if(result === "lose"){
        heroHp -= 1;
        heroHpEl.textContent = hearts(heroHp);
        appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©å‡ºäº† ${moveDisplay[enemy]}ã€‚\né­”ç‰©çš„å£æƒ…ç·’å¤ªå¼·çƒˆï¼Œä½ çš„å¥½å¿ƒæƒ… -1ã€‚`);

      } else {
        appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©å‡ºäº† ${moveDisplay[enemy]}ã€‚\nå‹¢å‡åŠ›æ•µï¼å†è©¦ä¸€æ¬¡ï¼`);
      }

      checkEnd();
    }

    // ========= åˆ¤å®šçµæŸ =========
    function checkEnd(){
      if(monsterMood === 0){
        resultTextEl.textContent = "ğŸ‰ ä½ æˆåŠŸè®“é­”ç‰©æ¢å¾©å¥½å¿ƒæƒ…ï¼ç²å¾—ä¸€é¡†å‹‡æ°£æ˜Ÿæ˜Ÿ âœ¨";
        appendLog("é­”ç‰©é–‹å¿ƒåœ°ç¬‘äº†èµ·ä¾†ï¼Œè®Šå›å¥½æœ‹å‹ã€‚");
        endGame();
      }
      if(heroHp === 0){
        resultTextEl.textContent = "ğŸ˜¢ ä½ çš„å¥½å¿ƒæƒ…ç”¨å®Œäº†â€¦ä¸‹æ¬¡å†æŒ‘æˆ°å§ï¼";
        appendLog("ä½ å›åˆ°æ‘èŠä¼‘æ¯ï¼Œä¸¦æ·±å‘¼å¸èª¿æ•´å¿ƒæƒ…ã€‚");
        endGame();
      }
    }

    function endGame(){
      gameOver = true;
      setButtonsEnabled(false);
      resetBtn.style.display = "inline-block";
    }

    // ========= äº‹ä»¶ç¶å®š =========
    startBtn.addEventListener("click", startGame);
    resetBtn.addEventListener("click", startGame);
    choiceButtons.forEach(btn=>{
      btn.addEventListener("click", ()=> handleChoice(btn.dataset.move));
    });
  </script>

</body>
</html>