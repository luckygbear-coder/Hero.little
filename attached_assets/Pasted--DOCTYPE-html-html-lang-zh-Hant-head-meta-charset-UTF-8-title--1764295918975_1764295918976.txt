<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å°å‹‡è€…å‰ªåˆ€çŸ³é ­å¸ƒ â€” å–®å ´æˆ°é¬¥ï¼‹é—œå¡ç‰ˆ DEMO</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(180deg, #ffe9c6, #fff6e9);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .game {
      width: 100%;
      max-width: 900px;
      background: #fffdf8;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      padding: 16px;
    }

    .top-row {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .panel {
      flex: 1;
      min-width: 260px;
      border-radius: 12px;
      padding: 12px;
      background: #fffaf0;
      border: 2px solid #f2dcc0;
    }

    .panel h2 {
      margin: 0 0 8px;
      font-size: 18px;
    }

    .monster-img,
    .hero-img {
      width: 100%;
      max-height: 260px;
      object-fit: contain;
      border-radius: 12px;
      background: #fdf4ea;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0 4px;
      font-size: 14px;
    }

    #hearts,
    #stars {
      font-size: 18px;
    }

    #level {
      font-size: 14px;
      color: #8a5b2c;
    }

    #kuma-tip {
      font-size: 14px;
      line-height: 1.4;
      background: #fff7e2;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px dashed #f0c27b;
      margin-top: 6px;
    }

    #kuma-tip::before {
      content: "ğŸ» æ‘é•·ç†Šç†Šï¼š";
      font-weight: 600;
    }

    #hero-info {
      font-size: 14px;
      line-height: 1.4;
      margin-top: 6px;
      background: #f4f8ff;
      border-radius: 10px;
      padding: 6px 8px;
      border: 1px solid #c7d8ff;
    }

    #hero-info strong {
      color: #3056b8;
    }

    #controls {
      margin-top: 12px;
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    #controls button {
      flex: 1;
      min-width: 90px;
      padding: 10px 8px;
      border-radius: 999px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      background: #ffe1a8;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
      box-shadow: 0 3px 0 #d8b07e;
    }

    #controls button:active {
      transform: translateY(2px);
      box-shadow: 0 1px 0 #d8b07e;
      background: #ffcf79;
    }

    #message {
      margin-top: 10px;
      font-size: 14px;
      min-height: 40px;
      background: #fff7eb;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid #f0d2a4;
      line-height: 1.5;
    }

    #monster-name {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    #monster-tags {
      font-size: 12px;
      color: #6c4a26;
      margin-bottom: 6px;
    }

    .tag {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      background: #ffe8c6;
      margin-right: 4px;
    }

    /* å°è¢å¹•èª¿æ•´ */
    @media (max-width: 600px) {
      .game {
        border-radius: 0;
        box-shadow: none;
        height: 100vh;
        overflow-y: auto;
      }
    }
  </style>
</head>
<body>
  <div class="game">
    <div class="status-row">
      <div id="hearts">â¤ï¸â¤ï¸â¤ï¸</div>
      <div id="level">ç¬¬ 1 / 10 é—œ</div>
      <div id="stars">â­ 0</div>
    </div>

    <div class="top-row">
      <!-- é­”ç‰©å€ -->
      <div class="panel">
        <h2>é­”ç‰©</h2>
        <div id="monster-name"></div>
        <div id="monster-tags"></div>
        <img id="monster-img" class="monster-img" src="" alt="monster" />
        <div id="kuma-tip"></div>
      </div>

      <!-- å‹‡è€…å€ -->
      <div class="panel">
        <h2>å°å‹‡è€…ï¼ˆæˆ°å£«ï¼‰</h2>
        <img id="hero-img" class="hero-img" src="hero_warrior.png" alt="hero warrior" />
        <div id="hero-info">
          è§’è‰²ï¼š<strong>æˆ°å£« ğŸ›¡ï¸ï¼ˆå¤©è³¦ï¼šâœŠ çŸ³é ­ï¼‰</strong><br />
          å¤©è³¦æ•ˆæœï¼š<strong>è‹¥å‡º âœŠ çŸ³é ­ä¸¦ä¸”ç²å‹ â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…ï¼ˆ+2â­ï¼‰</strong><br />
          å…¶ä»–æ‹³ç²å‹å‰‡æ˜¯ +1â­ã€‚
        </div>
      </div>
    </div>

    <!-- å‡ºæ‹³æŒ‰éˆ• -->
    <div id="controls">
      <button onclick="playRound('rock')">âœŠ çŸ³é ­</button>
      <button onclick="playRound('scissors')">âœŒ å‰ªåˆ€</button>
      <button onclick="playRound('paper')">ğŸ– å¸ƒ</button>
    </div>

    <!-- è¨Šæ¯å€ -->
    <div id="message">é»é¸ä¸Šé¢çš„æ‹³ï¼Œå¹«åŠ©å°å‹‡è€…å®‰æ’«é­”ç‰©å§ï¼</div>
  </div>

  <!-- éŸ³æ•ˆèˆ‡èªéŸ³ï¼ˆæª”åè«‹ç…§å‰é¢è¡¨æ ¼æº–å‚™ï¼‰ -->
  <audio id="sfx-throw" src="sfx_throw.mp3" preload="auto"></audio>
  <audio id="sfx-win" src="sfx_win.mp3" preload="auto"></audio>
  <audio id="voice-kuma" src="voice_kuma_tip.mp3" preload="auto"></audio>

  <script>
    // æ‹³ç¨®å°ç…§
    const moves = {
      rock:    { label: "âœŠ çŸ³é ­"   },
      paper:   { label: "ğŸ– å¸ƒ"     },
      scissors:{ label: "âœŒ å‰ªåˆ€"   }
    };

    // 10 éš»é­”ç‰©è³‡æ–™ï¼šå¤©è³¦ã€å¼±é»ã€åœ–ç‰‡æª”å
    const monsters = [
      {
        key: "slime",
        zhName: "å²èŠå§†",
        talent: "rock",
        weakness: "paper",
        sadImg: "slime_sad.png",
        happyImg: "slime_happy.png",
        cured: false
      },
      {
        key: "crying_bat",
        zhName: "å“­å“­è™è ",
        talent: "paper",
        weakness: "scissors",
        sadImg: "crying_bat_sad.png",
        happyImg: "crying_bat_happy.png",
        cured: false
      },
      {
        key: "little_imp",
        zhName: "å°æƒ¡é­”",
        talent: "rock",
        weakness: "scissors",
        sadImg: "little_imp_sad.png",
        happyImg: "little_imp_happy.png",
        cured: false
      },
      {
        key: "lazy_treant",
        zhName: "æ‡¶æ‡¶æ¨¹ç²¾",
        talent: "paper",
        weakness: "rock",
        sadImg: "lazy_treant_sad.png",
        happyImg: "lazy_treant_happy.png",
        cured: false
      },
      {
        key: "grumpy_fireball",
        zhName: "ç«çƒæ€ª",
        talent: "rock",
        weakness: "paper",
        sadImg: "grumpy_fireball_sad.png",
        happyImg: "grumpy_fireball_happy.png",
        cured: false
      },
      {
        key: "weeping_ghost",
        zhName: "å“­å“­é¬¼",
        talent: "scissors",
        weakness: "rock",
        sadImg: "weeping_ghost_sad.png",
        happyImg: "weeping_ghost_happy.png",
        cured: false
      },
      {
        key: "crying_mushroom",
        zhName: "å“­å“­é¦™è‡",
        talent: "paper",
        weakness: "scissors",
        sadImg: "crying_mushroom_sad.png",
        happyImg: "crying_mushroom_happy.png",
        cured: false
      },
      {
        key: "sad_skeleton",
        zhName: "å“­å“­éª·é«",
        talent: "rock",
        weakness: "paper",
        sadImg: "sad_skeleton_sad.png",
        happyImg: "sad_skeleton_happy.png",
        cured: false
      },
      {
        key: "happy_pumpkin",
        zhName: "å—ç“œé­”ç‹",
        talent: "rock",
        weakness: "paper",
        sadImg: "happy_pumpkin_sad.png",
        happyImg: "happy_pumpkin_happy.png",
        cured: false
      },
      {
        key: "ferocious_werewolf",
        zhName: "ç‹¼äºº",
        talent: "rock",
        weakness: "paper",
        sadImg: "ferocious_werewolf_sad.png",
        happyImg: "ferocious_werewolf_happy.png",
        cured: false
      }
    ];

    let currentIndex = 0;
    let hearts = 3;
    let stars = 0;

    function currentMonster() {
      return monsters[currentIndex];
    }

    function moveBeating(move) {
      if (move === "rock") return "paper";
      if (move === "paper") return "scissors";
      return "rock"; // scissors
    }

    function makeKumaTip(monster) {
      const talentLabel   = moves[monster.talent].label;
      const weaknessLabel = moves[monster.weakness].label;
      const bestMove      = moveBeating(monster.talent);
      const bestLabel     = moves[bestMove].label;

      return `${monster.zhName} çš„å¤©è³¦æ˜¯ ${talentLabel}ï¼Œæœ€æ‹¿æ‰‹é‚£ä¸€æ‹³å¾ˆå¼·å–”ï¼ä½†æ˜¯ç‰ ã€Œä¸èƒ½å‡ºã€ ${weaknessLabel}ã€‚ä½ å¯ä»¥å¤šè©¦è©¦ ${bestLabel}ï¼Œæ›´å®¹æ˜“è®“ç‰ æ¢å¾©å¥½å¿ƒæƒ…ï½`;
    }

    function renderStatus() {
      const heartsEl = document.getElementById("hearts");
      heartsEl.textContent = "â¤ï¸".repeat(hearts);

      const starsEl = document.getElementById("stars");
      starsEl.textContent = "â­ " + stars;

      const levelEl = document.getElementById("level");
      levelEl.textContent = `ç¬¬ ${currentIndex + 1} / ${monsters.length} é—œ`;
    }

    function renderMonster() {
      const monster = currentMonster();

      const nameEl = document.getElementById("monster-name");
      nameEl.textContent = monster.zhName;

      const tagsEl = document.getElementById("monster-tags");
      const talentLabel   = moves[monster.talent].label;
      const weaknessLabel = moves[monster.weakness].label;
      tagsEl.innerHTML =
        `<span class="tag">å¤©è³¦ï¼š${talentLabel}</span>` +
        `<span class="tag">å¼±é»ï¼ˆä¸èƒ½å‡ºï¼‰ï¼š${weaknessLabel}</span>`;

      const imgEl = document.getElementById("monster-img");
      imgEl.src = monster.cured ? monster.happyImg : monster.sadImg;

      const tipEl = document.getElementById("kuma-tip");
      tipEl.textContent = makeKumaTip(monster);

      // æ‘é•·ç†Šç†ŠèªéŸ³æç¤ºï¼ˆå¯èƒ½æœƒè¢«ç€è¦½å™¨éœéŸ³ï¼Œæ²’é—œä¿‚ï¼‰
      const voice = document.getElementById("voice-kuma");
      if (voice) {
        voice.currentTime = 0;
        voice.play().catch(() => {});
      }
    }

    function getMonsterMove(monster) {
      const allMoves = ["rock", "paper", "scissors"];
      const options = allMoves.filter(m => m !== monster.weakness); // ä¸èƒ½å‡ºå¼±é»æ‹³
      const idx = Math.floor(Math.random() * options.length);
      return options[idx];
    }

    function getResult(player, enemy) {
      if (player === enemy) return "tie";
      if (
        (player === "rock"     && enemy === "scissors") ||
        (player === "scissors" && enemy === "paper")    ||
        (player === "paper"    && enemy === "rock")
      ) {
        return "win";
      }
      return "lose";
    }

    function playRound(playerMove) {
      const throwSfx = document.getElementById("sfx-throw");
      if (throwSfx) {
        throwSfx.currentTime = 0;
        throwSfx.play().catch(() => {});
      }

      const monster = currentMonster();
      const enemyMove = getMonsterMove(monster);
      const result = getResult(playerMove, enemyMove);

      let msg = `ä½ å‡º ${moves[playerMove].label}ï¼Œé­”ç‰©å‡º ${moves[enemyMove].label}ã€‚`;

      if (result === "tie") {
        msg += " å¹³æ‰‹ï¼å†è©¦ä¸€æ¬¡ï½";
        document.getElementById("message").textContent = msg;
        return;
      }

      if (result === "win") {
        const winSfx = document.getElementById("sfx-win");
        if (winSfx) {
          winSfx.currentTime = 0;
          winSfx.play().catch(() => {});
        }

        let gain = 1;
        if (playerMove === "rock") {
          // æˆ°å£«å¤©è³¦ï¼šå‡ºçŸ³é ­ç²å‹ â†’ +2â­
          gain = 2;
          msg += " æˆ°å£«å¤©è³¦è§¸ç™¼ï¼å‡º âœŠ çŸ³é ­ç²å‹ï¼Œå‚³é” 2 å€å¥½å¿ƒæƒ…ï¼(+2â­)";
        } else {
          msg += " ä½ æˆåŠŸå®‰æ’«äº†é­”ç‰©ï¼(+1â­)";
        }

        stars += gain;
        monsters[currentIndex].cured = true;

        // é¡¯ç¤ºé–‹å¿ƒç‰ˆåœ–ç‰‡
        document.getElementById("monster-img").src = monster.happyImg;
        renderStatus();
        document.getElementById("message").textContent = msg;

        // 1.2 ç§’å¾Œè‡ªå‹•é€²å…¥ä¸‹ä¸€é—œ
        setTimeout(nextMonster, 1200);
        return;
      }

      // ç©å®¶è¼¸äº†
      hearts -= 1;
      msg += " é€™å›åˆè¢«å£æƒ…ç·’å½±éŸ¿äº†ï¼Œå¤±å»ä¸€é¡†å¿ƒâ€¦";
      if (hearts <= 0) {
        msg += " å¿ƒåŠ›ç”¨ç›¡å•¦ï¼å…ˆæ·±å‘¼å¸ä¸€ä¸‹ï¼Œå†é‡æ–°æŒ‘æˆ°å…¨éƒ¨é­”ç‰©å§ï½";
        document.getElementById("message").textContent = msg;

        // é‡ç½®éŠæˆ²
        setTimeout(() => {
          hearts = 3;
          stars = 0;
          currentIndex = 0;
          monsters.forEach(m => m.cured = false);
          renderStatus();
          renderMonster();
          document.getElementById("message").textContent =
            "æ–°çš„å†’éšªé–‹å§‹ï¼é»é¸æ‹³ï¼Œå¹«åŠ©å°å‹‡è€…å†æ¬¡å‡ºç™¼ï½";
        }, 1500);
      } else {
        renderStatus();
        document.getElementById("message").textContent = msg;
      }
    }

    function nextMonster() {
      if (currentIndex < monsters.length - 1) {
        currentIndex += 1;
        renderStatus();
        renderMonster();
        document.getElementById("message").textContent =
          "ä¸‹ä¸€éš»é­”ç‰©å‡ºç¾äº†ï¼çœ‹çœ‹æ‘é•·ç†Šç†Šçš„æç¤ºï¼Œå†å‡ºæ‹³å§ï½";
      } else {
        document.getElementById("message").textContent =
          "æ­å–œï¼æ‰€æœ‰é­”ç‰©éƒ½æ¢å¾©å¥½å¿ƒæƒ…ï¼Œå‹‡è€…ä»»å‹™å¤§æˆåŠŸï¼ğŸ‰";
      }
    }

    // åˆå§‹åŒ–
    window.addEventListener("load", () => {
      renderStatus();
      renderMonster();
    });
  </script>
</body>
</html>