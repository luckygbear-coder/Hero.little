<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å°å‹‡è€…å–®å ´æˆ°é¬¥ Demo</title>
  <style>
    /* ====== åŸºæœ¬ç•«é¢é¢¨æ ¼ï¼šèƒŒæ™¯ã€å®¹å™¨ ====== */
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", sans-serif;
      background: #fff7e6;
      margin: 0;
      padding: 16px;
      display: flex;
      justify-content: center;
    }
    .game-container {
      max-width: 600px;
      width: 100%;
      background: #fffdf7;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 16px;
      border: 3px solid #f3c58a;
    }
    h1 {
      text-align: center;
      margin: 0 0 4px;
      color: #d27b2f;
      font-size: 22px;
    }
    .sub {
      text-align: center;
      color: #666;
      font-size: 13px;
      margin-bottom: 12px;
    }
    .row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }
    .card {
      flex: 1 1 48%;
      background: #fffaf0;
      border-radius: 12px;
      padding: 10px;
      border: 2px solid #f0d2a4;
    }
    .card h2 {
      margin: 0 0 4px;
      font-size: 16px;
    }
    .label {
      font-size: 11px;
      color: #999;
      margin-bottom: 2px;
    }
    .hp, .mood {
      font-size: 18px;
      margin-bottom: 4px;
    }
    .avatar {
      font-size: 32px;
      text-align: center;
      margin-bottom: 4px;
    }
    .status-line {
      font-size: 12px;
      margin-bottom: 4px;
    }
    .select-row {
      margin-bottom: 12px;
      text-align: center;
      font-size: 13px;
    }
    select, button {
      font-size: 13px;
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid #d0b48a;
      background: #fff8e8;
    }
    button {
      cursor: pointer;
      font-weight: 600;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .choice-buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .choice-btn {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: 3px solid #f3c58a;
      font-size: 24px;
      background: #ffeec4;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 2px;
    }
    .choice-btn span {
      font-size: 10px;
    }
    .log {
      background: #fffaf0;
      border-radius: 8px;
      border: 1px dashed #f0cda0;
      padding: 8px;
      font-size: 12px;
      height: 120px;
      overflow-y: auto;
      white-space: pre-line;
    }
    .ribbon {
      text-align: center;
      margin-top: 6px;
      font-size: 13px;
      color: #a56a23;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>å°å‹‡è€…å–®å ´æˆ°é¬¥</h1>
    <div class="sub">å‰ªåˆ€ âœŒï¸ãƒ»çŸ³é ­ âœŠãƒ»å¸ƒ ğŸ–ã€€è®“é­”ç‰©æ¢å¾©å¥½å¿ƒæƒ…ï¼</div>

    <!-- ====== å‹‡è€…é¸æ“‡å€ï¼ˆå¯æ”¹è§’è‰²åç¨±ï¼‰ ====== -->
    <div class="select-row">
      <label for="heroSelect">é¸æ“‡å‹‡è€…ï¼š</label>
      <select id="heroSelect">
        <!-- æƒ³æ”¹é¸é …å°±æ”¹é€™è£¡çš„æ–‡å­— -->
        <option value="æˆ°å£«">æˆ°å£«ï¼ˆâœŠ çŸ³é ­åŠ æˆï¼‰</option>
        <option value="æ³•å¸«">æ³•å¸«ï¼ˆâœŒï¸ å‰ªåˆ€åŠ æˆï¼‰</option>
        <option value="ç‰§å¸«">ç‰§å¸«ï¼ˆğŸ– å¸ƒåŠ æˆï¼‰</option>
        <option value="å‹‡æ•¢çš„æ‘æ°‘">å‹‡æ•¢çš„æ‘æ°‘ï¼ˆå…¨èƒ½ï¼‰</option>
      </select>
      <button id="startBtn">é–‹å§‹æˆ°é¬¥</button>
    </div>

    <!-- ====== å‹‡è€… / é­”ç‰© ç‹€æ…‹å€ ====== -->
    <div class="row">
      <div class="card">
        <h2 id="heroName">å‹‡è€…</h2>
        <div class="avatar">ğŸ§’ğŸ»</div>
        <div class="label">å¥½å¿ƒæƒ…ï¼ˆHPï¼‰</div>
        <div class="hp" id="heroHp">â¤ï¸â¤ï¸â¤ï¸</div>
        <div class="label">ä¸Šä¸€å›åˆå‡ºæ‹³</div>
        <div class="status-line" id="heroLast">â€”</div>
      </div>

      <div class="card">
        <h2>è¢«å£æƒ…ç·’å½±éŸ¿çš„é­”ç‰©</h2>
        <div class="avatar">ğŸ‘¾</div>
        <div class="label">å£æƒ…ç·’å±¤æ•¸</div>
        <div class="mood" id="monsterMood">ğŸ’¢ğŸ’¢ğŸ’¢</div>
        <div class="label">ä¸Šä¸€å›åˆå‡ºæ‹³</div>
        <div class="status-line" id="monsterLast">â€”</div>
      </div>
    </div>

    <!-- ====== å‡ºæ‹³æŒ‰éˆ• ====== -->
    <div class="choice-buttons">
      <button class="choice-btn" data-move="rock" disabled>
        âœŠ
        <span>çŸ³é ­</span>
      </button>
      <button class="choice-btn" data-move="scissors" disabled>
        âœŒï¸
        <span>å‰ªåˆ€</span>
      </button>
      <button class="choice-btn" data-move="paper" disabled>
        ğŸ–
        <span>å¸ƒ</span>
      </button>
    </div>

    <!-- ====== è¨Šæ¯å€ & çµæœ ====== -->
    <div class="log" id="log"></div>
    <div class="ribbon" id="resultText"></div>
    <div style="text-align:center; margin-top:6px;">
      <button id="resetBtn" style="display:none;">å†ç©ä¸€æ¬¡</button>
    </div>
  </div>

  <script>
    // =============================
    // å¯èª¿æ•´çš„åŸºæœ¬æ•¸å€¼å€
    // =============================
    let MAX_HERO_HP = 3;      // å‹‡è€…æ„›å¿ƒæ•¸é‡ï¼Œæƒ³è®Šé›£å°±æ”¹å°ï¼Œè®Šç°¡å–®å°±æ”¹å¤§
    let MAX_MONSTER_MOOD = 3; // é­”ç‰©å£æƒ…ç·’å±¤æ•¸

    // ====== ç‹€æ…‹è®Šæ•¸ ======
    let heroHp;
    let monsterMood;
    let gameOver = false;

    const heroNameEl = document.getElementById("heroName");
    const heroHpEl = document.getElementById("heroHp");
    const monsterMoodEl = document.getElementById("monsterMood");
    const heroLastEl = document.getElementById("heroLast");
    const monsterLastEl = document.getElementById("monsterLast");
    const logEl = document.getElementById("log");
    const resultTextEl = document.getElementById("resultText");
    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");
    const heroSelect = document.getElementById("heroSelect");
    const choiceButtons = document.querySelectorAll(".choice-btn");

    const moveDisplay = {
      rock: "âœŠï¼ˆçŸ³é ­ï¼‰",
      scissors: "âœŒï¸ï¼ˆå‰ªåˆ€ï¼‰",
      paper: "ğŸ–ï¼ˆå¸ƒï¼‰"
    };

    function hearts(n) {
      return "â¤ï¸".repeat(n);
    }

    function angry(n) {
      return "ğŸ’¢".repeat(n);
    }

    function appendLog(text) {
      logEl.textContent += text + "\n";
      logEl.scrollTop = logEl.scrollHeight;
    }

    function setButtonsEnabled(enabled) {
      choiceButtons.forEach(btn => btn.disabled = !enabled);
    }

    // ====== é–‹å§‹ / é‡ç½®éŠæˆ² ======
    function startGame() {
      const heroName = heroSelect.value;
      heroNameEl.textContent = "å‹‡è€…ï¼š" + heroName;
      heroHp = MAX_HERO_HP;
      monsterMood = MAX_MONSTER_MOOD;
      gameOver = false;

      heroHpEl.textContent = hearts(heroHp);
      monsterMoodEl.textContent = angry(monsterMood);
      heroLastEl.textContent = "â€”";
      monsterLastEl.textContent = "â€”";
      logEl.textContent = "";
      resultTextEl.textContent = "";
      appendLog(`ä½ é¸æ“‡äº†ã€${heroName}ã€‘ï¼\nä¸€éš»è¢«å£æƒ…ç·’çºä½çš„é­”ç‰©å‡ºç¾äº†ï¼`);

      setButtonsEnabled(true);
      resetBtn.style.display = "none";
    }

    // ====== ç³»çµ±éš¨æ©Ÿå‡ºæ‹³ ======
    function randomMove() {
      const moves = ["rock", "scissors", "paper"];
      const idx = Math.floor(Math.random() * moves.length);
      return moves[idx];
    }

    // ====== å‰ªåˆ€çŸ³é ­å¸ƒåˆ¤å®š ======
    function judge(player, enemy) {
      if (player === enemy) return "draw";
      if (
        (player === "rock" && enemy === "scissors") ||
        (player === "scissors" && enemy === "paper") ||
        (player === "paper" && enemy === "rock")
      ) return "win";
      return "lose";
    }

    // ====== è™•ç†å‡ºæ‹³ ======
    function handleChoice(move) {
      if (gameOver) return;

      const enemyMove = randomMove();
      const result = judge(move, enemyMove);

      heroLastEl.textContent = moveDisplay[move];
      monsterLastEl.textContent = moveDisplay[enemyMove];

      if (result === "win") {
        monsterMood--;
        if (monsterMood < 0) monsterMood = 0;
        monsterMoodEl.textContent = angry(monsterMood);
        appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©å‡ºäº† ${moveDisplay[enemyMove]}ã€‚\nä½ æˆåŠŸå‚³éå¥½å¿ƒæƒ…ï¼Œé­”ç‰©å£æƒ…ç·’ -1ï¼`);
      } else if (result === "lose") {
        heroHp--;
        if (heroHp < 0) heroHp = 0;
        heroHpEl.textContent = hearts(heroHp);
        appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©å‡ºäº† ${moveDisplay[enemyMove]}ã€‚\né­”ç‰©çš„å£æƒ…ç·’å¤ªå¼·çƒˆï¼Œä½ çš„å¥½å¿ƒæƒ… -1ã€‚`);
      } else {
        appendLog(`ä½ å‡ºäº† ${moveDisplay[move]}ï¼Œé­”ç‰©ä¹Ÿå‡ºäº† ${moveDisplay[enemyMove]}ã€‚\nå‹¢å‡åŠ›æ•µï¼Œå†è©¦ä¸€æ¬¡ï¼`);
      }

      checkEnd();
    }

    // ====== åˆ¤æ–·å‹è²  ======
    function checkEnd() {
      if (monsterMood === 0) {
        gameOver = true;
        resultTextEl.textContent = "ğŸ‰ æ­å–œï¼ä½ è®“é­”ç‰©æ¢å¾©äº†å¥½å¿ƒæƒ…ï¼Œç²å¾—ä¸€é¡†å‹‡æ°£æ˜Ÿæ˜Ÿï¼";
        appendLog("\né­”ç‰©é–‹å¿ƒåœ°éœ²å‡ºç¬‘å®¹ï¼Œè®Šå›äº†æº«æŸ”çš„æ‘æ°‘ã€‚");
        setButtonsEnabled(false);
        resetBtn.style.display = "inline-block";
      } else if (heroHp === 0) {
        gameOver = true;
        resultTextEl.textContent = "ğŸ˜¢ ä½ çš„å¥½å¿ƒæƒ…ç”¨å®Œäº†ï¼Œä¸‹æ¬¡å†å¸¶è‘—æ›´å¤šå‹‡æ°£ä¾†æŒ‘æˆ°å§ï¼";
        appendLog("\nä½ å…ˆå›æ‘èŠä¼‘æ¯ä¸€ä¸‹ï¼Œæ•´ç†å¿ƒæƒ…å†å‡ºç™¼ã€‚");
        setButtonsEnabled(false);
        resetBtn.style.display = "inline-block";
      }
    }

    // ====== ç¶å®šäº‹ä»¶ ======
    startBtn.addEventListener("click", startGame);
    resetBtn.addEventListener("click", startGame);

    choiceButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const move = btn.getAttribute("data-move");
        handleChoice(move);
      });
    });
  </script>
</body>
</html>